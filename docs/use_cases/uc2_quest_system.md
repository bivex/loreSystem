# Use Case 2: –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## –û–ø–∏—Å–∞–Ω–∏–µ
–°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã–º–∏ —Ü–µ–ø–æ—á–∫–∞–º–∏ –∫–≤–µ—Å—Ç–æ–≤ —Å –ø—Ä–µ—Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏, –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è–º–∏ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–≥—Ä–æ–∫–æ–≤.

## –ê–∫—ë—Ä—ã
- **Quest Designer**: –°–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–≤–µ—Å—Ç–æ–≤ –∏ —Ü–µ–ø–æ—á–∫–∏
- **Technical Writer**: –ü–∏—à–µ—Ç —Ç–µ–∫—Å—Ç—ã –∫–≤–µ—Å—Ç–æ–≤ –∏ –æ–ø–∏—Å–∞–Ω–∏—è
- **QA Engineer**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≥–∏–∫—É –∫–≤–µ—Å—Ç–æ–≤ –∏ –Ω–∞–≥—Ä–∞–¥
- **Game Designer**: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è

## –°—Ü–µ–Ω–∞—Ä–∏–π
–ù–∞—Ä—Ä–∞—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω–µ—Ä —Ö–æ—á–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∫–≤–µ—Å—Ç "Ancient Artifact Recovery" –¥–ª—è RPG-–∏–≥—Ä—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —ç—Ç–∞–ø–∞–º–∏:
1. –ò–≥—Ä–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç –¥—Ä–µ–≤–Ω–∏–π —Å–≤–∏—Ç–æ–∫ (–æ–±—ä–µ–∫—Ç)
2. –ò–≥—Ä–æ–∫ –ø—Ä–∏–Ω–æ—Å–∏—Ç —Å–≤–∏—Ç–æ–∫ –∞—Ä—Ö–µ–æ–ª–æ–≥—É (NPC)
3. –ê—Ä—Ö–µ–æ–ª–æ–≥ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Å–≤–∏—Ç–æ–∫ (–ø–µ—Ä–µ–≤–æ–¥)
4. –ò–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç)
5. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (–ª–æ–∫–∞—Ü–∏—è)

## –ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è
- –ù–∞–ª–∏—á–∏–µ NPC (QuestGiver)
- –ù–∞–ª–∏—á–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞ (Item)
- –ù–∞–ª–∏—á–∏–µ –ª–æ–∫–∞—Ü–∏–∏ (Location)
- –ù–∞–ª–∏—á–∏–µ –æ–ø—ã—Ç–∞ (Experience)

## –ü–æ—Å—Ç—É—Å–ª–æ–≤–∏—è
- –ö–≤–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤—è–∑–∞–Ω —Å –∫–∞–º–ø–∞–Ω–∏–µ–π (Campaign)
- –ü—Ä–æ–≥—Ä–µ—Å—Å –∫–≤–µ—Å—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º (QuestTracker)
- –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–¥–∞–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞

```python
from src.domain import (
    QuestChain, QuestNode, QuestPrerequisite, QuestObjective,
    QuestGiver, QuestTracker, QuestRewardTier,
    Campaign, Location, Item, Experience
)
from src.domain.value_objects import TenantId, EntityId, Description, Version, Timestamp

def create_ancient_artifact_quest(tenant_id: TenantId, world_id: EntityId, campaign_id: EntityId) -> QuestChain:
    """
    –°–æ–∑–¥–∞—ë—Ç —Å–ª–æ–∂–Ω—É—é —Ü–µ–ø–æ—á–∫—É –∫–≤–µ—Å—Ç–æ–≤ "Ancient Artifact Recovery".
    """
    
    # 1. –°–æ–∑–¥–∞—ë–º –∫–≤–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–∞–∑–¥–∞—é—â–µ–≥–æ (–∞—Ä—Ö–µ–æ–ª–æ–≥)
    quest_giver = QuestGiver.create(
        tenant_id=tenant_id,
        name="Dr. Elena Vance",
        location_id=EntityId("location_ruins_of_kingdom"),
        dialogue="–ú–∞–≥–∏—Å—Ç—Ä! –Ø –Ω–∞—à–ª–∞ –¥—Ä–µ–≤–Ω–∏–π —Å–≤–∏—Ç–æ–∫..."
    )
    
    # 2. –°–æ–∑–¥–∞—ë–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–≤–µ—Å—Ç (–Ω–∞—Ö–æ–¥–∫–∞ —Å–≤–∏—Ç–∫–∞)
    main_quest = QuestNode.create(
        tenant_id=tenant_id,
        name="Find the Ancient Artifact",
        description="Dr. Vance discovered an artifact in the Ruins. Retrieve it.",
        quest_type="main",
        difficulty="hard",
        quest_giver_id=quest_giver.id,
        chain_id=quest_giver.id,
        is_repeatable=False,
        estimated_time_minutes=60
    )
    
    # 3. –°–æ–∑–¥–∞—ë–º —ç—Ç–∞–ø—ã –∫–≤–µ—Å—Ç–∞ (–∫–≤–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏)
    objective_1 = QuestObjective.create(
        tenant_id=tenant_id,
        quest_node_id=main_quest.id,
        description="Find the artifact in the Ruins",
        objective_type="interaction",
        target_entity_id=EntityId("location_ruins"),
        is_required=True
    )
    
    objective_2 = QuestObjective.create(
        tenant_id=tenant_id,
        quest_node_id=main_quest.id,
        description="Bring the artifact to Dr. Vance",
        objective_type="item_delivery",
        target_entity_id=quest_giver.id,
        target_item_id=EntityId("item_ancient_artifact"),
        is_required=True
    )
    
    # 4. –°–æ–∑–¥–∞—ë–º –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –∑–∞ –∫–≤–µ—Å—Ç
    reward_tier = QuestRewardTier.create(
        tenant_id=tenant_id,
        name="Ancient Artifact Rewards",
        tier=2,
        reward_ids=[EntityId("xp_1000"), EntityId("item_scarab_amulet")]
    )
    
    # 5. –°–æ–∑–¥–∞—ë–º –ø—Ä–µ—Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –∫–≤–µ—Å—Ç–∞
    prerequisite = QuestPrerequisite.create(
        tenant_id=tenant_id,
        quest_node_id=main_quest.id,
        requirement_type="level",
        value=30,
        description="Requires level 30 to access Ruins"
    )
    
    # 6. –°–æ–∑–¥–∞—ë–º —Å–≤—è–∑–∫—É —Å –∫–∞–º–ø–∞–Ω–∏–µ–π
    campaign = CampaignRepository.get(campaign_id)
    
    # 7. –°–æ–∑–¥–∞—ë–º —Ü–µ–ø–æ—á–∫—É –∫–≤–µ—Å—Ç–æ–≤
    quest_chain = QuestChain.create(
        tenant_id=tenant_id,
        name="Ancient Artifact Recovery",
        campaign_id=campaign_id,
        difficulty="hard",
        estimated_playtime_hours=4,
        quest_giver_id=quest_giver.id,
        quests=[main_quest.id]
    )
    
    # 8. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –¥–ª—è –∫–≤–µ—Å—Ç–∞
    main_quest.set_reward_tier_id(reward_tier.id)
    main_quest.set_experience_reward(1000)
    
    # 9. –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç)
    artifact_item = Item.create(
        tenant_id=tenant_id,
        name="Ancient Scarab Amulet",
        description="–ü—Ä–æ–∫–ª—è—Ç—ã–π –∞–º—É–ª–µ—Ç –¥—Ä–µ–≤–Ω–∏—Ö –∂—Ä–µ—Ü–æ–≤",
        item_type="artifact",
        rarity="legendary"
    )
    
    # 10. –°–æ–∑–¥–∞—ë–º –∫–≤–µ—Å—Ç –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –Ω–æ–≤–æ–π –æ–±–ª–∞—Å—Ç–∏ (—ç–ø–∏–ª–æ–≥)
    epilogue_quest = QuestNode.create(
        tenant_id=tenant_id,
        name="Explore the Discovered Ruins",
        description="–í –æ—Ç–∫—Ä—ã—Ç—ã–µ —Ä—É–∏–Ω—ã —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ —Ç–∞–π–Ω—ã",
        quest_type="side",
        difficulty="medium",
        quest_giver_id=quest_giver.id,
        chain_id=quest_chain.id,
        is_repeatable=False,
        is_hidden=True
    )
    
    # 11. –î–æ–±–∞–≤–ª—è–µ–º —ç–ø–∏–ª–æ–≥ –≤ –∫–∞–º–ø–∞–Ω–∏—é
    epilogue = Epilogue.create(
        tenant_id=tenant_id,
        name="Discovery Epilogue",
        description="–û—Ç–∫—Ä—ã—Ç–∏–µ –¥—Ä–µ–≤–Ω–∏—Ö —Ä—É–∏–Ω –º–µ–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –º–∏—Ä–∞",
        ending_id=EndingRepository.get("ending_good").id
    )
    
    # 12. –°–æ–∑–¥–∞—ë–º —Å–∏—Å—Ç–µ–º—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    quest_tracker = QuestTracker.create(
        tenant_id=tenant_id,
        player_id=EntityId("player_hero"),
        quest_chain_id=quest_chain.id,
        started_at=Timestamp.now(),
        completed_objectives=[],
        status="in_progress"
    )
    
    # 13. –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–±–æ—á–Ω—ã–µ –∫–≤–µ—Å—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    side_quest_1 = QuestNode.create(
        tenant_id=tenant_id,
        name="Defend the Ruins from Bandits",
        description="–ë–∞–Ω–¥–∏—Ç—ã –ø—ã—Ç–∞—é—Ç—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å —Ä—É–∏–Ω—ã. –ó–∞—â–∏—Ç–∏ –∏—Ö.",
        quest_type="side",
        difficulty="medium",
        quest_giver_id=quest_giver.id,
        chain_id=quest_chain.id,
        is_repeatable=True,
        estimated_time_minutes=30
    )
    
    side_quest_2 = QuestNode.create(
        tenant_id=tenant_id,
        name="Translate the Artifact Text",
        description="–î—Ä–µ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç –Ω–∞ –∞–º—É–ª–µ—Ç–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏",
        quest_type="side",
        difficulty="easy",
        quest_giver_id=quest_giver.id,
        chain_id=quest_chain.id,
        is_repeatable=False,
        is_hidden=False,
        objectives=[QuestObjective.create(...)]  # –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞
    )
    
    # 14. –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∫–≤–µ—Å—Ç–æ–≤–æ–π —Ü–µ–ø–æ—á–∫–∏
    quest_chain.add_quest(side_quest_1)
    quest_chain.add_quest(side_quest_2)
    quest_chain.set_epilogue_id(epilogue.id)
    
    # 15. –°–æ–∑–¥–∞—ë–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–≤–µ—Å—Ç (Easter Egg)
    easter_egg = EasterEgg.create(
        tenant_id=tenant_id,
        name="Hidden Passage Behind Artifact",
        description="–ó–∞ –∞–º—É–ª–µ—Ç–æ–º —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ—Ö–æ–¥",
        condition="interact_with_item",
        secret_item_id=EntityId("item_secret_key")
    )
    
    # 16. –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–∫—Ä–µ—Ç –≤ —Å–∏—Å—Ç–µ–º—É –∫–≤–µ—Å—Ç–æ–≤
    side_quest_2.add_secret_reference(easter_egg.id)
    
    # 17. –°–≤—è–∑—ã–≤–∞–µ–º –∫–≤–µ—Å—Ç–æ–≤—É—é —Ü–µ–ø–æ—á–∫—É —Å –∫–∞–º–ø–∞–Ω–∏–µ–π
    campaign.add_quest_chain(quest_chain)
    
    # 18. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ –∫–≤–µ—Å—Ç–∞
    quest_chain.set_auto_acceptable(False)  # –ò–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω—è—Ç—å –∫–≤–µ—Å—Ç –≤—Ä—É—á–Ω—É—é
    
    # 19. –î–æ–±–∞–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç–∏
    quest_chain.set_cooldown_days(7)  # –ö–≤–µ—Å—Ç –º–æ–∂–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–∞–∂–¥—ã–µ 7 –¥–Ω–µ–π
    
    # 20. –°–æ–∑–¥–∞—ë–º —Å–∏—Å—Ç–µ–º—É –æ—Ç–∑—ã–≤–æ–≤ (–æ—Ç–∑—ã–≤—ã –Ω–∞ –∫–≤–µ—Å—Ç)
    quest_review = Quest.create(
        tenant_id=tenant_id,
        name="Quest Review: Ancient Artifact Recovery",
        description="–ò–≥—Ä–æ–∫–∏ –º–æ–≥—É—Ç –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –Ω–∞ —ç—Ç–æ—Ç –∫–≤–µ—Å—Ç",
        quest_type="system",
        review_enabled=True
    )
    
    return quest_chain

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
if __name__ == "__main__":
    from src.domain.value_objects import TenantId, EntityId
    
    tenant_id = TenantId("tenant_001")
    world_id = EntityId("world_001")
    campaign_id = EntityId("campaign_001")
    
    # –°–æ–∑–¥–∞—ë–º –∫–≤–µ—Å—Ç–æ–≤—É—é —Ü–µ–ø–æ—á–∫—É
    quest_chain = create_ancient_artifact_quest(tenant_id, world_id, campaign_id)
    
    # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    print(f"‚úÖ –ö–≤–µ—Å—Ç–æ–≤–∞—è —Ü–µ–ø–æ—á–∫–∞ —Å–æ–∑–¥–∞–Ω–∞: {quest_chain.name}")
    print(f"üìö –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–≤–µ—Å—Ç–æ–≤: {len(quest_chain.quests)}")
    print(f"‚è±Ô∏è –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: {quest_chain.estimated_playtime_hours} —á–∞—Å–æ–≤")
    print(f"üéØ –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è: {len([q.reward_tier_id for q in quest_chain.quests if q.reward_tier_id])}")
    print(f"üîí –ü–æ–±–æ—á–Ω—ã–µ –∫–≤–µ—Å—Ç—ã: {len([q for q in quest_chain.quests if q.is_side])}")
    print(f"üé¨ –≠–ø–∏–ª–æ–≥: {quest_chain.epilogue_id}")
```

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- **Quest Completion Rate**: % –∏–≥—Ä–æ–∫–æ–≤, –∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö –∫–≤–µ—Å—Ç–æ–≤—É—é —Ü–µ–ø–æ—á–∫—É
- **Quest Abandonment Rate**: % –∏–≥—Ä–æ–∫–æ–≤, –±—Ä–æ—Å–∏–≤—à–∏—Ö –∫–≤–µ—Å—Ç
- **Average Quest Completion Time**: –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- **Quest Difficulty Rating**: –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞–º–∏
- **Reward Satisfaction**: –û—Ü–µ–Ω–∫–∞ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- **Quest System**: QuestChain, QuestNode, QuestObjective, QuestPrerequisite
- **Reward System**: QuestRewardTier, Item
- **Experience System**: Experience
- **Achievement System**: Achievement (–∫–≤–µ—Å—Ç–æ–≤—ã–π –∫–≤–µ—Å—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ)

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–≠—Ç–æ—Ç Use Case –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–π –∫–≤–µ—Å—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è AAA-–∏–≥—Ä:
- –ú–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–µ –∫–≤–µ—Å—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ (main, side, system)
- –ü—Ä–µ—Ä–µ–∫–≤–∏–∑–∏—Ç—ã –∏ —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –°–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–º–ø–∞–Ω–∏—è–º–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–≥—Ä–æ–∫–æ–≤
- –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–≤–µ—Å—Ç—ã –∏ –ø–∞—Å—Ö–∞–ª–∫–∏ –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
