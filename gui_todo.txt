# GUI Implementation Todo List for New Lore System Entities

## Overview
The lore system domain has been extended with new entities: Note, Map, Handout, Inspiration, Tokenboard, and Flowchart. However, the PyQt6 GUI currently only supports: Worlds, Characters, Events, Improvements, Items, Quests, and Storylines.

## Missing GUI Features

### 1. LoreData Class Updates
- [ ] Add lists for new entities:
  - `self.notes: List[Note] = []`
  - `self.maps: List[Map] = []`
  - `self.handouts: List[Handout] = []`
  - `self.inspirations: List[Inspiration] = []`
  - `self.tokenboards: List[Tokenboard] = []`
  - `self.flowcharts: List[Flowchart] = []`

- [ ] Add add_* methods for each new entity:
  - `add_note(note: Note) -> Note`
  - `add_map(map: Map) -> Map`
  - `add_handout(handout: Handout) -> Handout`
  - `add_inspiration(inspiration: Inspiration) -> Inspiration`
  - `add_tokenboard(tokenboard: Tokenboard) -> Tokenboard`
  - `add_flowchart(flowchart: Flowchart) -> Flowchart`

- [ ] Update `to_dict()` method to include new entities in serialization
- [ ] Update `from_dict()` method to load new entities from JSON
- [ ] Add serialization helper methods:
  - `_note_to_dict(note: Note) -> Dict`
  - `_dict_to_note(data: Dict) -> Note`
  - `_map_to_dict(map: Map) -> Dict`
  - `_dict_to_map(data: Dict) -> Map`
  - `_handout_to_dict(handout: Handout) -> Dict`
  - `_dict_to_handout(data: Dict) -> Handout`
  - `_inspiration_to_dict(inspiration: Inspiration) -> Dict`
  - `_dict_to_inspiration(data: Dict) -> Inspiration`
  - `_tokenboard_to_dict(tokenboard: Tokenboard) -> Dict`
  - `_dict_to_tokenboard(data: Dict) -> Tokenboard`
  - `_flowchart_to_dict(flowchart: Flowchart) -> Dict`
  - `_dict_to_flowchart(data: Dict) -> Flowchart`

### 2. MainWindow Class Updates
- [ ] Add new tabs to the tab widget:
  - `self.notes_tab = NotesTab(self.lore_data)`
  - `self.maps_tab = MapsTab(self.lore_data)`
  - `self.handouts_tab = HandoutsTab(self.lore_data)`
  - `self.inspirations_tab = InspirationsTab(self.lore_data)`
  - `self.tokenboards_tab = TokenboardsTab(self.lore_data)`
  - `self.flowcharts_tab = FlowchartsTab(self.lore_data)`

- [ ] Add tabs to the QTabWidget:
  - `self.tabs.addTab(self.notes_tab, "üìù Notes")`
  - `self.tabs.addTab(self.maps_tab, "üó∫Ô∏è Maps")`
  - `self.tabs.addTab(self.handouts_tab, "üìÑ Handouts")`
  - `self.tabs.addTab(self.inspirations_tab, "üí° Inspirations")`
  - `self.tabs.addTab(self.tokenboards_tab, "üéØ Tokenboards")`
  - `self.tabs.addTab(self.flowcharts_tab, "üìä Flowcharts")`

- [ ] Update `_refresh_all()` method to refresh new tabs
- [ ] Update `_update_statistics()` method to include counts for new entities
- [ ] Update toolbar statistics label to show new entity counts
- [ ] Update sample data loading to include new entities if present

### 3. New Tab Classes Implementation

#### NotesTab(QWidget)
- [ ] Implement table with columns: ID, World, Title, Content, Tags, Created
- [ ] Add form for creating/editing notes with fields:
  - World selection dropdown
  - Title input
  - Content text area
  - Tags input (comma-separated)
- [ ] Implement CRUD operations: Add, Edit, Delete, Duplicate
- [ ] Add filtering by world, tags, and text search
- [ ] Add refresh() method

#### MapsTab(QWidget)
- [ ] Implement table with columns: ID, World, Name, Description, Map Type, Created
- [ ] Add form for creating/editing maps with fields:
  - World selection dropdown
  - Name input
  - Description text area
  - Map type dropdown (world, region, city, dungeon, etc.)
- [ ] Implement CRUD operations: Add, Edit, Delete, Duplicate
- [ ] Add filtering by world, map type, and text search
- [ ] Add refresh() method

#### HandoutsTab(QWidget)
- [ ] Implement table with columns: ID, World, Title, Content Type, Status, Created
- [ ] Add form for creating/editing handouts with fields:
  - World selection dropdown
  - Title input
  - Content text area
  - Content type dropdown (text, image, document, etc.)
  - Status dropdown (draft, ready, distributed)
- [ ] Implement CRUD operations: Add, Edit, Delete, Duplicate
- [ ] Add filtering by world, content type, status, and text search
- [ ] Add refresh() method

#### InspirationsTab(QWidget)
- [ ] Implement table with columns: ID, World, Title, Category, Source, Created
- [ ] Add form for creating/editing inspirations with fields:
  - World selection dropdown
  - Title input
  - Description text area
  - Category dropdown (character, location, plot, item, etc.)
  - Source input (book, website, personal, etc.)
- [ ] Implement CRUD operations: Add, Edit, Delete, Duplicate
- [ ] Add filtering by world, category, source, and text search
- [ ] Add refresh() method

#### TokenboardsTab(QWidget)
- [ ] Implement table with columns: ID, World, Name, Description, Token Count, Created
- [ ] Add form for creating/editing tokenboards with fields:
  - World selection dropdown
  - Name input
  - Description text area
  - Token count display (calculated from tokens)
- [ ] Implement CRUD operations: Add, Edit, Delete, Duplicate
- [ ] Add token management (add/remove tokens from board)
- [ ] Add filtering by world and text search
- [ ] Add refresh() method

#### FlowchartsTab(QWidget)
- [ ] Implement table with columns: ID, World, Name, Description, Node Count, Created
- [ ] Add form for creating/editing flowcharts with fields:
  - World selection dropdown
  - Name input
  - Description text area
  - Node count display (calculated from nodes)
- [ ] Implement CRUD operations: Add, Edit, Delete, Duplicate
- [ ] Add node/connection management interface
- [ ] Add filtering by world and text search
- [ ] Add refresh() method

### 4. Import Requirements
- [ ] Ensure all new entity classes are imported in lore_editor.py:
  - `from src.domain.entities.note import Note`
  - `from src.domain.entities.map import Map`
  - `from src.domain.entities.handout import Handout`
  - `from src.domain.entities.inspiration import Inspiration`
  - `from src.domain.entities.tokenboard import Tokenboard`
  - `from src.domain.entities.flowchart import Flowchart`

- [ ] Import any new value objects/enums needed for the forms

### 5. UI/UX Consistency
- [ ] Follow existing design patterns from ItemsTab and other tabs
- [ ] Use consistent styling and icons
- [ ] Implement proper form validation with error messages
- [ ] Add tooltips and keyboard shortcuts where appropriate
- [ ] Ensure responsive layout with splitter widgets for larger forms

### 6. Search and Filtering
- [ ] Update main window search to work with new tabs
- [ ] Implement filter_items() method in each new tab class
- [ ] Add filter controls consistent with ItemsTab implementation

### 7. Testing
- [ ] Test serialization/deserialization of new entities
- [ ] Test GUI CRUD operations for each new entity
- [ ] Test filtering and search functionality
- [ ] Test integration with existing entities (world relationships)

## Implementation Priority
1. **High Priority**: LoreData updates (serialization, add methods)
2. **High Priority**: Basic tab classes with CRUD operations
3. **Medium Priority**: Advanced features (filtering, search, validation)
4. **Low Priority**: UI polish, keyboard shortcuts, advanced interactions

## Dependencies
- All new entity classes must be implemented in the domain layer
- Value objects and enums must be available
- Existing GUI patterns should be followed for consistency

---

## New Features & Enhancements

### 8. Page & Template System
- [ ] Add PagesTab for managing lore pages:
  - Table view with columns: ID, World, Name, Template, Tags, Updated
  - Rich text editor for page content
  - Template selection dropdown
  - Tag management (add/remove visual tags)
  - Image management (attach images to pages)
  - Parent page selection for hierarchical structure
  - Preview mode for rendered pages

- [ ] Add TemplatesTab for managing page templates:
  - Table view with columns: ID, World, Name, Type, Runes, Updated
  - Template editor with content structure
  - Rune management (sub-templates)
  - Template type selection (Page/Rune)
  - Parent template selection
  - Template preview/test functionality

### 9. Story & Choice System
- [ ] Add StoriesTab for narrative management:
  - Table view with columns: ID, World, Name, Type, Status, Choices, Updated
  - Story editor with rich text content
  - Story type selection (Linear/Non-Linear/Interactive)
  - Choice management for non-linear stories
  - World element connections
  - Activation/deactivation toggle
  - Story flow visualization

- [ ] Add ChoicesTab for managing player choices:
  - Table view with columns: ID, World, Text, Type, Impact, Created
  - Choice editor with description
  - Choice type selection (Branch/Consequence/Decision)
  - Impact/consequence editor
  - Link to related story pages
  - Preview of choice outcomes

### 10. Session Management
- [ ] Add SessionsTab for game session tracking:
  - Table view with columns: ID, World, Name, Date, Status, Duration, Notes
  - Session planner with date/time picker
  - Status management (Scheduled/Active/Completed/Cancelled)
  - Session notes editor
  - Character attendance tracking
  - Session summary generator
  - Link to related notes and handouts

### 11. Tags & Visual Organization
- [ ] Add TagsTab for managing visual tags:
  - Table view with columns: ID, World, Name, Type, Color, Usage Count
  - Tag editor with color picker
  - Tag type selection (Category/Theme/Status/Custom)
  - Description editor
  - Tag usage analytics (show which pages use this tag)
  - Color-coded display in other tabs

### 12. Images & Media
- [ ] Add ImagesTab for media library:
  - Grid/table view with thumbnails
  - Image upload and management
  - Image type selection (PNG/JPG/GIF/SVG)
  - File path display
  - Usage tracking (show where image is used)
  - Image preview and metadata
  - Bulk upload functionality

### 13. Advanced Search & Filtering
- [ ] Global search across all entities:
  - Search bar in main toolbar
  - Filter by entity type
  - Full-text search in content fields
  - Search history
  - Saved search filters
  - Results grouped by entity type

- [ ] Advanced filtering panel:
  - Multi-criteria filters
  - Date range filters
  - Tag-based filtering
  - Status-based filtering
  - Custom filter presets

### 14. Relationships & Connections
- [ ] Add RelationshipsTab:
  - Visualize connections between entities
  - Graph view of world structure
  - Character relationships diagram
  - Story flow diagrams
  - Entity dependency tracking
  - Quick navigation between related entities

### 15. Export & Reporting
- [ ] Export functionality:
  - Export to PDF (individual pages or entire world)
  - Export to Markdown
  - Export to HTML (static wiki)
  - Export to JSON (backup/sharing)
  - Custom export templates
  - Batch export options

- [ ] Reporting dashboard:
  - World statistics overview
  - Character statistics
  - Story completion tracking
  - Session history reports
  - Content creation timeline
  - Export reports as PDF/CSV

### 16. Import & Integration
- [ ] Import functionality:
  - Import from JSON
  - Import from Markdown files
  - Import from other lore management tools
  - Bulk import wizard
  - Import conflict resolution
  - Import preview before commit

### 17. Versioning & History
- [ ] Version control features:
  - Entity version history viewer
  - Compare versions side-by-side
  - Revert to previous version
  - Version annotations/comments
  - Automatic version snapshots
  - Version conflict detection

### 18. Collaboration Features
- [ ] Multi-user support:
  - User/GM mode toggle
  - Permission levels (read/write/admin)
  - Entity locking during editing
  - Change notifications
  - Comment system on entities
  - Share-specific entities with players

### 19. AI Assistant Integration
- [ ] AI-powered features:
  - Content generation assistance
  - Character backstory generator
  - Plot suggestion tool
  - Name generator (characters, places, items)
  - Content improvement suggestions
  - Consistency checker
  - Grammar and style checker

### 20. UI/UX Enhancements
- [ ] Theme customization:
  - Dark/Light mode toggle
  - Custom color schemes
  - Font size adjustment
  - Layout presets (compact/comfortable/spacious)
  - Custom entity icons

- [ ] Workflow improvements:
  - Quick add buttons in toolbar
  - Recent items sidebar
  - Favorites/bookmarks system
  - Keyboard shortcuts panel
  - Context menus for quick actions
  - Drag-and-drop entity linking
  - Undo/redo functionality

- [ ] Accessibility:
  - Screen reader support
  - High contrast mode
  - Keyboard navigation throughout
  - Tooltips and help text
  - Tutorial/onboarding wizard

### 21. Performance & Optimization
- [ ] Large dataset handling:
  - Lazy loading for tables
  - Virtual scrolling for large lists
  - Background loading indicators
  - Pagination for large result sets
  - Database indexing optimization
  - Memory usage optimization

### 22. Backup & Recovery
- [ ] Automated backup system:
  - Configurable auto-save interval
  - Backup location configuration
  - Backup rotation/retention policy
  - One-click restore from backup
  - Cloud backup integration (optional)
  - Backup integrity verification

---

## Implementation Roadmap

### Phase 1: Core Missing Entities (Weeks 1-3)
- Notes, Maps, Handouts tabs
- Basic CRUD operations
- Serialization/deserialization

### Phase 2: Advanced Entities (Weeks 4-6)
- Pages, Templates, Stories, Choices tabs
- Tags and Images tabs
- Visual organization features

### Phase 3: Session & Workflow (Weeks 7-8)
- Sessions tab
- Advanced search and filtering
- Relationships visualization

### Phase 4: Export & Import (Weeks 9-10)
- Export functionality (PDF, Markdown, HTML)
- Import functionality
- Reporting dashboard

### Phase 5: Polish & Enhancements (Weeks 11-12)
- Theme customization
- UI/UX improvements
- Performance optimization
- Backup system

### Phase 6: Advanced Features (Future)
- Versioning system
- Collaboration features
- AI assistant integration</content>
<parameter name="filePath">/Volumes/External/Code/loreSystem/gui_todo.txt